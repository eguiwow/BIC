{% extends "base.html" %}
{% load static %} 

  {% block title %}
  <title>Bike Intelligence Centre</title>
  {% endblock %}
  {% block section_title %} <h2 class="pt-2">Consulta la actividad en Bizkaia</h2> {% endblock %}
  {% block content %}
  <!-- Formulario de consulta
  DÍA/HORA INICIO
  DÍA/HORA FINAL
  LON/LAT ? (se puede hacer por bounding box)
  -->
  <form action="" method="post">
    {% csrf_token %}
    <div class="form-row pl-5 pt-3">
      <div class="col">
        {{ form.since_datetime.errors }}
        {{ form.since_datetime.label_tag }}
        {{ form.since_datetime }}
      </div>
      <div class="col">
        {{ form.until_datetime.errors }}
        {{ form.until_datetime.label_tag }}
        {{ form.until_datetime }}            
      </div>
      <div class="col"></div>
    </div>
    <div class="form-row pl-5 pt-3">
      <div class="col">
        {{ form.SW_lon.errors }}
        {{ form.SW_lon.label_tag }}
        {{ form.SW_lon }}
      </div>
      <div class="col">
        {{ form.SW_lat.errors }}
        {{ form.SW_lat.label_tag }}
        {{ form.SW_lat }}            
      </div>
      <div class="col">
        <button type="button" class="btn btn-primary" id="selectAreaButton">Seleccionar Área</button>
      </div>
    </div>
    <div class="form-row pl-5 pt-3">
      <div class="col">
        {{ form.NE_lon.errors }}
        {{ form.NE_lon.label_tag }}
        {{ form.NE_lon }}
      </div>
      <div class="col">
        {{ form.NE_lat.errors }}
        {{ form.NE_lat.label_tag }}
        {{ form.NE_lat }}            
      </div>
      <div class="col"></div>
    </div>
    <div class="form-row">
      <div class="col pl-5 text-center">
        <input type="submit" class="btn btn-primary" value="Submit">
      </div>
      <div class="col"></div>
    </div>
  </form>
    <!-- TODO que estos botones estén separados -->
  
  {% endblock %}
  {% block map %}
  <div id="map" class="pt-3" style="width: 100%; height: 80%; max-height: 1000px;"></div>
  {% endblock %}
  {% block aftermap %}  
  <!-- Info de Features -->
  <div id="info">&nbsp;</div>
  <!-- Zona Variables ocultas -->
  <var id="zoom" hidden> {{zoom}} </var>
  <var id="center" hidden> {{center}} </var>
  <var id="json_tracks" hidden> {{gj_tracks}} </var>
  <var id="json_dtours" hidden> {{gj_dtours}} </var>
  <var id="json_bidegorris" hidden> {{gj_bidegorris}} </var>
  <var id="consulta_vacia" hidden> {{consulta_vacia}} </var>

  <!-- /Zona Variables ocultas -->
  <!-- Zona archivos -->
  <div class="col text-center">
    <button class="btn btn-primary" id="centerButton"> Centrar </button>  
    <button class="botonDebug" id="debugButton"> Debug </button>
  </div>
  <!-- <div class="archivos"></div> -->
   <!-- <h3> Nombres archivos geojson</h3>
    {% if gj_tracks %}
    {{ gj_tracks }}
    {% else %}
      <p> NO se han pasado los GeoJSON </p>     
    {% endif %} -->
    <!-- <h3> Nombres archivos geojson (dtours)</h3>
    {% if gj_dtours %}
    {{ gj_dtours }}
    {% else %}
      <p> NO se han pasado los GeoJSON (buffers)</p>     
    {% endif %} -->
  <!-- /Zona archivos -->
  <script src="{% static 'js/query_map.js' %}"></script>        
  {% endblock %}

